# 博客维护手册

## 项目结构

```
/Users/craigyoung/hexo-blog/  ← Hexo 源码目录
├── _config.yml             ← 主配置文件
├── themes/yang-design/    ← 自定义主题
├── source/                ← 文章和页面源码
│   ├── _posts/           ← 博客文章
│   ├── about/            ← 关于页面
│   ├── memos/            ← 碎碎念页面
│   └── images/           ← 图片资源
├── public/               ← 生成的静态网站（自动生成）
└── .github/workflows/   ← GitHub Actions 配置
```

## 日常工作流程

### 1. 写新文章

```bash
# 进入项目目录
cd /Users/craigyoung/hexo-blog

# 创建新文章（可选）
npx hexo new post "文章标题"

# 或直接编辑文章文件
vim source/_posts/文章标题.md
```

文章格式示例：
```markdown
---
title: 文章标题
date: YYYY-MM-DD
tags:
  - 标签1
  - 标签2
---

文章内容...
```

### 2. 修改配置

- 主配置：编辑 `_config.yml`
- 主题配置：编辑 `themes/yang-design/_config.yml`

### 3. 提交更新

```bash
# 检查状态
git status

# 添加文件
git add .

# 提交
git commit -m "更新说明"

# 推送到 GitHub（触发自动部署）
git push origin source
```

### 4. 等待部署

- Actions 会自动运行
- 几分钟后访问 https://youngreviews.cc 查看更新

## 特色功能

### 1. 碎碎念功能

访问 `/memos/` 使用：
- 编辑器：输入想说的话
- 密码验证：点击 🔑 验证管理员身份
- 数据存储：LeanCloud 的 shuoshuo 表

### 2. 主题特性

- 旋转头像：点击头像 360° 旋转
- 响应式设计：适配手机端
- 卡片布局：首页文章展示
- 自动标签：支持文章分类

### 3. 部署机制

- 源码管理：`source` 分支
- 静态网站：`main` 分支（自动生成）
- GitHub Pages：`https://youngreviews.cc`
- 自动部署：Actions 监听 `source` 分支推送

## 常用命令

```bash
# 启动本地服务器
npx hexo server

# 生成静态文件
npx hexo generate

# 部署到 GitHub（旧方式）
npx hexo deploy

# 清理缓存
npx hexo clean

# 创建新文章
npx hexo new draft "草稿标题"
```

## 重要提醒

### ⚠️ 注意事项

1. **只操作 source 分支**
   - 不要手动修改 main 分支
   - 不要强制推送到 main 分支

2. **冲突解决**
   ```bash
   # 更新本地代码
   git pull origin source

   # 解决冲突后提交
   git add .
   git commit -m "解决冲突"
   git push origin source
   ```

3. **备份重要**
   - 定期备份 `/Users/craigyoung/hexo-blog` 目录
   - 源码已在 GitHub 的 source 分份

### 🔧 故障排查

1. **网站不更新**
   - 检查 Actions 运行日志
   - 确认推送到的是 `source` 分支
   - 查看 GitHub Actions 中的错误信息

2. **本地服务器问题**
   ```bash
   # 清理缓存
   npx hexo clean

   # 重新生成
   npx hexo generate

   # 启动服务器
   npx hexo server
   ```

3. **依赖问题**
   ```bash
   # 删除 node_modules
   rm -rf node_modules

   # 重新安装依赖
   npm install
   ```

## GitHub Actions 配置

### 工作流程文件
```
.github/workflows/deploy.yml
```

### 触发条件
- 监听 `source` 分支的 push 事件
- 自动安装依赖、生成静态文件
- 强制推送到 `main` 分支

### 自定义域名
- CNAME: `youngreviews.cc`
- 部署路径: `/`

## 联系支持

如遇问题：
1. 检查此文档
2. 查看 Actions 日志
3. 联系作者维护

---
**更新时间**: 2026-01-25
**版本**: v1.0
**维护者**: Mr. Young